<div id="wagonSettlementFormSection" class="bootstrap form">
	<div class="container">
    <form name="wagonSettlementForm" class="form-horizontal">
      <div class="form-group">
        <div class="col-sm-12">
          <button class="btn btn-default" data-ng-class="{'main-btn': !wagonSettlementForm.$invalid}"
                  data-ng-if="viewModel.$location.path() === '/ql-toa-hang/quyet-toan/sua/' + viewModel.currentWagonSettlement.id"
                  data-ng-click="viewModel.updateWagonSettlement(viewModel.currentWagonSettlement)" data-ng-disabled="wagonSettlementForm.$invalid">
            <span class="glyphicon glyphicon-ok"></span>
            <span>Cập nhật</span>
          </button>

          <button class="btn btn-default negative-btn" data-ng-click="viewModel.$location.path('/ql-toa-hang/quyet-toan')">
            <span class="glyphicon glyphicon-remove"></span>
            <span>Hủy</span>
          </button>
        </div>
      </div>

      <div class="form-group margin-top-20">
        <label for="customerId" class="col-sm-2 control-label">Tên khách hàng</label>
        <div class="col-sm-4">
          <input id="customerId" name="customerId" class="form-control" type="text" value={{viewModel.getCustomerName(viewModel.currentWagonSettlement.customerId)}} disabled>
        </div>
        <label for="totalAmount" class="col-sm-2 control-label">Tổng phí</label>
        <div class="col-sm-4 text-right">
          <b>{{viewModel.currentWagonSettlement.quantity * viewModel.currentWagonSettlement.unitPrice + viewModel.currentWagonSettlement.phiPhatSinh | currency: "" : 0}}</b>
        </div>
      </div>
      <div class="form-group">
        <label for="wagonId" class="col-sm-2 control-label">Quyết toán toa hàng</label>
        <div class="col-sm-4">
          <input id="wagonId" name="wagonId" class="form-control" type="text" value={{viewModel.getWagonCode(viewModel.currentWagonSettlement.wagonId)}} disabled>
        </div>
        <label for="payment" class="col-sm-2 control-label">Phí phát sinh</label>
        <div class="col-sm-4 text-right">
          {{viewModel.currentWagonSettlement.phiPhatSinh | currency: "" : 0}}
        </div>
      </div>
      <div class="form-group">
        <label for="destination" class="col-sm-2 control-label">Nơi đến</label>
        <div class="col-sm-4">
          <input id="destination" name="destination" class="form-control" type="text" value={{viewModel.currentWagonSettlement.destination}} disabled>
        </div>
        <label for="payment" class="col-sm-2 control-label">Đã thanh toán</label>
        <div class="col-sm-4 text-right">
          {{viewModel.currentWagonSettlement.payment | currency: "" : 0}}
        </div>
      </div>
      <div class="form-group">
        <label for="quantity" class="col-sm-2 control-label">Số lượng</label>
        <div class="col-sm-4">
          <input id="quantity" name="quantity" class="form-control" type="text" value={{viewModel.currentWagonSettlement.quantity}} disabled>
        </div>
        <label for="paymentRemain" class="col-sm-2 control-label">Còn lại</label>
        <div class="col-sm-4 text-right">
          <b>{{viewModel.currentWagonSettlement.paymentRemain | currency: "" : 0}}</b>
        </div>
      </div>
      <div class="form-group">
        <label for="unit" class="col-sm-2 control-label">Đơn vị tính</label>
        <div class="col-sm-4">
          <input id="unit" name="unit" class="form-control" type="text" data-ng-model="viewModel.currentWagonSettlement.unit" disabled>
        </div>
        <label for="paymentDate" class="col-sm-2 control-label">Ngày giao dịch</label>
        <div class="col-sm-4">
          <datepicker class="date-picker" date-format="dd/MM/yyyy" date-set="{{viewModel.todayFormat}}">
            <input id="paymentDate" class="form-control" name="paymentDate" type="text" ng-model="viewModel.currentWagonSettlement.paymentDate">
          </datepicker>
        </div>
      </div>
      <div class="form-group">
        <label for="unitPrice" class="col-sm-2 control-label">Đơn giá</label>
        <div class="col-sm-4">
          <input id="unitPrice" name="unitPrice" class="form-control" type="text" data-ng-model="viewModel.currentWagonSettlement.unitPriceFormatted" disabled>
        </div>
        <label for="newPayment" class="col-sm-2 control-label">Thanh toán mới</label>
        <div class="col-sm-4">
          <input id="newPayment" name="newPayment" class="form-control text-right" type="text" maxlength="15" data-ng-model="viewModel.currentWagonSettlement.newPaymentFormatted"
                 data-ng-change="viewModel.updateNewPayment()" max={{viewModel.currentWagonSettlement.paymentRemain}} validator-max />
          <span class="required-field validate-error" data-ng-if="wagonSettlementForm.newPayment.$error.maxValue"><b>Thanh toán mới</b> phải nhỏ hơn <b>Còn lại</b></span>
        </div>
      </div>
      
      <div class="form-group">
        <div class="col-sm-12">
          <button class="btn btn-default" data-ng-class="{'main-btn': !wagonSettlementForm.$invalid}"
              data-ng-if="viewModel.$location.path() === '/ql-toa-hang/quyet-toan/sua/' + viewModel.currentWagonSettlement.id"
              data-ng-click="viewModel.updateWagonSettlement(viewModel.currentWagonSettlement)" data-ng-disabled="wagonSettlementForm.$invalid">
            <span class="glyphicon glyphicon-ok"></span>
            <span>Cập nhật</span>
          </button>

          <button class="btn btn-default negative-btn" data-ng-click="viewModel.$location.path('/ql-toa-hang/quyet-toan')">
            <span class="glyphicon glyphicon-remove"></span>
            <span>Hủy</span>
          </button>
        </div>
      </div>
    </form>
  </div>
</div>